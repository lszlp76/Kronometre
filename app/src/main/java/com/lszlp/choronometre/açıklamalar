# INDUSTRIAL CHRONOMETER - TEKNÄ°K DOKÃœMANTASYONU

## ğŸ“± PROJE GENEL BAKIÅ

**Industrial Chronometer**, endÃ¼striyel zaman Ã¶lÃ§Ã¼mÃ¼ ve cycle time analizi iÃ§in geliÅŸtirilmiÅŸ geliÅŸmiÅŸ bir Android kronometre uygulamasÄ±dÄ±r.

### ğŸ¯ Temel Ã–zellikler
- **Ã‡oklu Zaman Birimleri**: Saniye, Santidakika, Desimdakika
- **Cycle Time Analizi**: Lap kayÄ±tlarÄ± ve istatistiksel analiz
- **Veri DÄ±ÅŸa Aktarma**: Excel formatÄ±nda raporlama
- **Grafiksel GÃ¶sterim**: Real-time performans grafikleri
- **Widget DesteÄŸi**: Ana ekrandan hÄ±zlÄ± eriÅŸim
- **Arka Plan Ã‡alÄ±ÅŸmasÄ±**: Foreground service ile sÃ¼rekli zaman Ã¶lÃ§Ã¼mÃ¼

## ğŸ—ï¸ MÄ°MARÄ° YAPI

### Teknoloji YÄ±ÄŸÄ±nÄ±
- **Dil**: Java
- **Mimari**: MVVM + Fragments
- **Veri PaylaÅŸÄ±mÄ±**: ViewModel + LiveData
- **Servis**: Foreground Service
- **VeritabanÄ±**: SharedPreferences + File Storage

### ModÃ¼l YapÄ±sÄ±
```
app/
â”œâ”€â”€ MainActivity (Ana kontrolÃ¶r)
â”œâ”€â”€ TimerFragment (Zaman Ã¶lÃ§Ã¼m ekranÄ±)
â”œâ”€â”€ ChartFragment (Grafik analiz)
â”œâ”€â”€ FileList (Dosya yÃ¶netimi)
â”œâ”€â”€ ChronometerService (Arka plan servisi)
â”œâ”€â”€ PageViewModel (Veri paylaÅŸÄ±mÄ±)
â””â”€â”€ CustomAlertDialogFragment (Ã–zel diyaloglar)
```

## ğŸ“„ KRÄ°TÄ°K SINIF DOKÃœMANTASYONU

### 1. MainActivity.java

#### ğŸ“‹ SÄ±nÄ±f TanÄ±mÄ±
UygulamanÄ±n ana aktivitesi, navigation drawer ve tab yapÄ±sÄ±nÄ± yÃ¶netir.

#### ğŸ”§ Temel DeÄŸiÅŸkenler
```java
public DrawerLayout drawer; // Navigation drawer
public Boolean isResetDone; // Reset durumu kontrolÃ¼
private ChronoState currentState = ChronoState.STOPPED; // Kronometre durumu
private AdView adView; // Reklam banner
boolean auth; // Lap yetkilendirmesi
```

#### ğŸ¯ Ã–nemli Metodlar

**onCreate()**
- Uygulama baÅŸlangÄ±Ã§ konfigÃ¼rasyonu
- Ä°zin kontrolleri ve temel setup

**initializeApp()**
- Uygulama bileÅŸenlerinin baÅŸlatÄ±lmasÄ±
- Theme ve reklam sisteminin aktivasyonu

**setupAppContent()**
- ViewPager ve Fragment'larÄ±n oluÅŸturulmasÄ±
- Navigation drawer yapÄ±landÄ±rmasÄ±

**checkAndRequestAllPermissions()**
- Depolama ve bildirim izinlerinin yÃ¶netimi

#### âš ï¸ Dikkat Edilmesi Gerekenler
- `onBackPressed()` override edilmiÅŸ - uygulama arka plana atÄ±lÄ±yor
- `dispatchKeyEvent()` ile volume tuÅŸlarÄ± kronometre kontrolÃ¼ iÃ§in kullanÄ±lÄ±yor

### 2. TimerFragment.java

#### ğŸ“‹ SÄ±nÄ±f TanÄ±mÄ±
Zaman Ã¶lÃ§Ã¼mÃ¼ ve lap yÃ¶netiminin yapÄ±ldÄ±ÄŸÄ± ana fragment.

#### ğŸ”§ Temel DeÄŸiÅŸkenler
```java
public String Timeunit; // SeÃ§ilen zaman birimi
public int modul; // Zaman hesaplama modÃ¼lÃ¼
public int milis; // Milisaniye Ã§arpanÄ±
private long lastKnownElapsedTime = 0L; // Servisten gelen zaman
ArrayList<Lap> lapsArray = new ArrayList<>(); // Lap kayÄ±tlarÄ±
boolean Auth; // Kronometre Ã§alÄ±ÅŸma durumu
```

#### ğŸ¯ Ã–nemli Metodlar

**start()**
- Kronometreyi baÅŸlatÄ±r
- Foreground service'i tetikler

**stop()**
- Kronometreyi durdurur
- Servisi sonlandÄ±rÄ±r

**takeLap()**
- Mevcut zamanÄ± lap olarak kaydeder
- Ä°statistikleri gÃ¼nceller

**resetAll()**
- TÃ¼m verileri sÄ±fÄ±rlar
- UI'Ä± baÅŸlangÄ±Ã§ durumuna getirir

#### âš ï¸ Kritik Noktalar
- Zaman birimine gÃ¶re farklÄ± hesaplama algoritmalarÄ± mevcut
- Broadcast receiver'lar ile servis-Fragment iletiÅŸimi saÄŸlanÄ±yor

### 3. ChronometerService.java

#### ğŸ“‹ SÄ±nÄ±f TanÄ±mÄ±
Arka planda zaman Ã¶lÃ§Ã¼mÃ¼nÃ¼ sÃ¼rdÃ¼ren foreground service.

#### ğŸ”§ Temel DeÄŸiÅŸkenler
```java
private Handler handler; // Zaman gÃ¼ncelleme handler'Ä±
private long startTime = 0L; // BaÅŸlangÄ±Ã§ zamanÄ±
private long elapsedTime = 0L; // GeÃ§en sÃ¼re
private boolean isRunning = false; // Ã‡alÄ±ÅŸma durumu
private boolean isPaused = false; // Duraklatma durumu
```

#### ğŸ¯ Ã–nemli Metodlar

**startTimer()**
- Zaman gÃ¼ncelleme runnable'Ä±nÄ± baÅŸlatÄ±r
- Her 10ms'de bir UI ve bildirimi gÃ¼nceller

**pauseChronometer()**
- Kronometreyi duraklatÄ±r
- GeÃ§en sÃ¼reyi kaydeder

**resumeChronometer()**
- DuraklatÄ±lmÄ±ÅŸ kronometreyi devam ettirir

**buildNotification()**
- Ã–zel notification layout'u oluÅŸturur

### 4. PageViewModel.java

#### ğŸ“‹ SÄ±nÄ±f TanÄ±mÄ±
Fragment'lar arasÄ± veri paylaÅŸÄ±mÄ±nÄ± saÄŸlayan ViewModel.

#### ğŸ”§ LiveData DeÄŸiÅŸkenleri
```java
MutableLiveData<Integer> mIndex; // Lap sayÄ±sÄ±
MutableLiveData<Float> mTimeValue; // Lap deÄŸeri
MutableLiveData<String> mTimerValue; // Kronometre deÄŸeri
MutableLiveData<ArrayList<Lap>> lapsForChart; // Grafik verisi
```

## ğŸ”§ TEKNÄ°K DETAYLAR

### Zaman Birimi Sistemleri

#### 1. Saniye (Sec.)
- **ModÃ¼l**: 60
- **Milisaniye**: 1000
- **Format**: HH:MM:SS.MMM

#### 2. Santidakika (Cmin.)
- **ModÃ¼l**: 100
- **Milisaniye**: 600
- **Format**: HH:MM:CC
- **1 Cmin** = 0.01 dakika = 600ms

#### 3. Desimdakika (Dmh.)
- **ModÃ¼l**: 166
- **Milisaniye**: 360
- **Format**: HH:DD:CC
- **1 Dmh** = 0.001 dakika = 360ms

### Veri AkÄ±ÅŸÄ± DiyagramÄ±

```
TimerFragment â†’ ChronometerService â†’ Broadcast â†’ TimerFragment/ChartFragment
     â†“
PageViewModel (Veri PaylaÅŸÄ±mÄ±)
     â†“
ChartFragment/FileList
```

## ğŸ› ï¸ KURULUM VE YAPILANDIRMA

### Gereksinimler
- **Minimum SDK**: API 21 (Android 5.0)
- **Target SDK**: API 34 (Android 14)
- **Gerekli Ä°zinler**:
  - `WRITE_EXTERNAL_STORAGE` (API 32 ve altÄ±)
  - `POST_NOTIFICATIONS` (API 33 ve Ã¼stÃ¼)
  - `FOREGROUND_SERVICE`

### Build KonfigÃ¼rasyonu
```gradle
android {
    compileSdk 34
    defaultConfig {
        applicationId "com.lszlp.choronometre"
        minSdk 21
        targetSdk 34
    }
}
```

## ğŸš¨ TEST STRATEJÄ°SÄ°

### Birim Testleri
- ViewModel state management
- Zaman hesaplama algoritmalarÄ±
- Lap istatistik hesaplamalarÄ±

### Entegrasyon Testleri
- Fragment-Service iletiÅŸimi
- Broadcast receiver senaryolarÄ±
- File I/O operasyonlarÄ±

### UI Testleri
- Kronometre kontrol akÄ±ÅŸlarÄ±
- Navigation ve tab geÃ§iÅŸleri
- Dialog interaksiyonlarÄ±

## ğŸ”„ GÃœNCELLEME REHBERÄ°

### API Seviyesi GÃ¼ncellemeleri
1. **Android 10+ (API 29)**: Scoped Storage adaptasyonu
2. **Android 12+ (API 31)**: PendingIntent flags gÃ¼ncellemesi
3. **Android 13+ (API 33)**: Bildirim izni yÃ¶netimi

### Kritik GÃ¼ncelleme NoktalarÄ±

#### 1. Foreground Service YÃ¶netimi
```java
// Android 8.0+ iÃ§in foreground service baÅŸlatma
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
    requireContext().startForegroundService(serviceIntent);
}
```

#### 2. Bildirim KanalÄ± YÃ¶netimi
```java
// Android 8.0+ iÃ§in notification channel
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
    NotificationChannel channel = new NotificationChannel(
        Constants.CHANNEL_ID,
        "Kronometre Servisi",
        NotificationManager.IMPORTANCE_LOW
    );
}
```

#### 3. Dosya EriÅŸim YÃ¶netimi
```java
// Android 10+ iÃ§in MediaStore kullanÄ±mÄ±
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.Q) {
    ContentValues contentValues = new ContentValues();
    contentValues.put(MediaStore.Downloads.RELATIVE_PATH, 
        Environment.DIRECTORY_DOWNLOADS + "/IndustrialChronometer");
}
```

### GÃ¼venlik GÃ¼ncellemeleri
- **FileProvider**: Dosya paylaÅŸÄ±mÄ± iÃ§in gÃ¼venli yÃ¶ntem
- **PendingIntent Flags**: IMMUTABLE flag kullanÄ±mÄ±
- **Broadcast Export**: Receiver'larÄ±n export kontrolÃ¼

## ğŸ“Š PERFORMANS OPTÄ°MÄ°ZASYONU

### Memory YÃ¶netimi
- View binding kullanÄ±mÄ±
- Broadcast receiver'larÄ±n doÄŸru lifecycle yÃ¶netimi
- Handler ve Runnable'larÄ±n temizlenmesi

### Battery Optimizasyonu
- Foreground service doÄŸru kullanÄ±mÄ±
- WakeLock sÄ±nÄ±rlÄ± kullanÄ±m
- Background iÅŸlemlerin optimize edilmesi

## ğŸ› BÄ°LÄ°NEN SORUNLAR VE Ã‡Ã–ZÃœMLER

### 1. Servis-Fragment Senkronizasyonu
**Sorun**: Uygulama arka plana alÄ±ndÄ±ÄŸÄ±nda zaman senkronizasyonu kaybolabiliyor.

**Ã‡Ã¶zÃ¼m**: `ACTION_REQUEST_STATUS` mekanizmasÄ± ile durum senkronizasyonu.

### 2. Memory Leaks
**Sorun**: Broadcast receiver kayÄ±tlarÄ±nÄ±n temizlenmemesi.

**Ã‡Ã¶zÃ¼m**: 
```java
@Override
public void onDestroy() {
    super.onDestroy();
    LocalBroadcastManager.getInstance(requireContext())
        .unregisterReceiver(timeUpdateReceiver);
}
```

### 3. UI Thread Bloklama
**Sorun**: Zaman hesaplamalarÄ±nÄ±n UI thread'ini bloklamasÄ±.

**Ã‡Ã¶zÃ¼m**: Handler ve Runnable kullanÄ±mÄ± ile arka planda hesaplama.

## ğŸ”® GELÄ°ÅTÄ°RME Ã–NERÄ°LERÄ°

### KÄ±sa Vadeli
- [ ] ViewModel test coverage artÄ±rÄ±mÄ±
- [ ] Error handling iyileÅŸtirmeleri
- [ ] Memory leak detection implementasyonu

### Orta Vadeli
- [ ] Room database entegrasyonu
- [ ] WorkManager ile background processing
- [ ] Jetpack Compose migrasyon planÄ±

### Uzun Vadeli
- [ ] Multi-module architecture
- [ ] Dynamic feature modules
- [ ] Cloud sync ve backup Ã¶zellikleri

---

**DokÃ¼man Versiyonu**: 1.1  
**Son GÃ¼ncelleme**: 2025
